# qs_script_rest_api

helpful script snippets working with REST connector


```
LET vBaseAPIurl = 'https://jsonplaceholder.typicode.com/todos';

// Get current date/time into ISO format 2018-01-01T00:00:00.000Z
LET vDateTo = Date(Today(),'YYYY-MM-DD') & 'T' & Time(Now(), 'hh:mm:ss') & '.000Z';

// Define your Json-Body here
SET vJsonFilter = {
  "dateFrom": "2018-01-01T00:00:00.000Z",
  "dateTo": "$(vDateTo)"
};
// replace 1xquote with 2xquote and remove line-break amd tabulator chars
LET vJsonFilter = PurgeChar(Replace(vJsonFilter,'"','""'),CHR(13)&CHR(10)&CHR(8));

// load block generated by Select Data wizard goes here 
RestConnectorMasterTable
SQL SELECT 
   // block generated by Select Data that loads the Json-structure
FROM JSON ...
// with block added by you
WITH CONNECTION (
    URL "$(vBaseAPIurl)/endpoint/method"
    ,QUERY "pagesize" "1000"
    //,HTTPHEADER "Cache-Control" "no-cache"
    ,HTTPHEADER "Authorization" "Bearer $(vToken)"
    ,HTTPHEADER "Content-Type" "application/json"
    //,HTTPHEADER "X-HTTP-Method-Override" "PUT",
    //,BODY "{""path"":""$(vAttribute)""}"
    //,BODY "$(vJsonBody)"
); 
´´´
jklhkjh
